var v=Object.defineProperty,w=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var u=(t,s,a)=>s in t?v(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,p=(t,s)=>{for(var a in s||(s={}))N.call(s,a)&&u(t,a,s[a]);if(d)for(var a of d(s))L.call(s,a)&&u(t,a,s[a]);return t},h=(t,s)=>w(t,C(s));import{a8 as k,r as c,j as e,a as r,F as E,a9 as b,aa as m,L as j,c as F,ab as S,ac as A,ad as D,ae as B,af as M,t as T,ag as q,ah as O,ai as R}from"./index.5e1275c5.js";import{W as H}from"./index.30991c28.js";import{D as P,C as Q,A as _}from"./index.aee05186.js";import"./lodash.93e2b8dd.js";const g="\u5FEB\u901F\u5BFC\u822A",y=({list:t,showTitle:s=!0})=>r("ul",{className:"preview",children:[s&&e(m,{children:g}),t.map(a=>e("li",{children:e(j,{to:`/article/${a.id}`,children:a.title})},a.id))]}),G=({list:t})=>{const s=k.exports.useMediaQuery({query:"(min-width: 1300px)"}),[a,n]=c.exports.useState(!1);return s?e(y,{list:t}):r(E,{children:[e("div",{className:"drawer-btn",onClick:()=>n(!0),children:e(b,{className:"nav-phone-icon"})}),e(P,{title:g,placement:"right",closable:!1,onClose:()=>n(!1),visible:a,getContainer:()=>document.querySelector(".app-home"),children:e(y,{list:t,showTitle:!1})})]})},I=({list:t})=>{const s=F(),a=n=>{s(`/article/${n}`)};return e("ul",{className:"app-home-list",children:t.map(n=>r("li",{className:"app-home-list-item",children:[r(m,{orientation:"left",children:[e("span",{className:"title",onClick:()=>a(n.id),children:n.title}),e("span",{className:"posted-time",children:n.createdAt.slice(0,10)})]}),e("div",{onClick:()=>a(n.id),className:"article-detail content",dangerouslySetInnerHTML:{__html:n.content}}),r("div",{className:"list-item-others",children:[e(Q,{style:{marginRight:4}}),e("span",{style:{marginRight:8},children:S(n.comments)}),e(A,{style:{marginRight:4}}),e("span",{children:n.viewCount}),e(_,{tagList:n.tags,categoryList:n.categories})]})]},n.id))})};const U=()=>{const t=D(),{loading:s,pagination:a,dataList:n}=B({requestUrl:"/article/list",queryParams:{pageSize:M},fetchDependence:[t.search]}),o=c.exports.useMemo(()=>[...n].map(i=>{const f=i.content.indexOf("<!--more-->");return i.content=T(i.content.slice(0,f)),i}),[n]),[l,x]=c.exports.useState("");return c.exports.useEffect(()=>{const{keyword:i}=q(t.search);x(i)},[]),e(O,{tip:"Loading...",spinning:s,children:r("div",{className:"app-home",children:[e(I,{list:o}),e(G,{list:o}),o.length===0&&l&&e("div",{className:"no-data",children:e(R,{description:r("span",{children:["\u4E0D\u5B58\u5728\u6807\u9898/\u5185\u5BB9\u4E2D\u542B\u6709",e("span",{className:"keyword",children:l}),"\u7684\u6587\u7AE0\uFF01"]})})}),e(H,h(p({},a),{onChange:i=>{document.querySelector(".app-main").scrollTop=0,a.onChange(i)}}))]})})};export{U as default};
